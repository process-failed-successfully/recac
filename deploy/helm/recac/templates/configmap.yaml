apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "recac.fullname" . }}
  labels:
    {{- include "recac.labels" . | nindent 4 }}
data:
  RECAC_PROVIDER: {{ .Values.config.provider | quote }}
  {{- if .Values.config.ollamaBaseUrl }}
  RECAC_OLLAMA_BASE_URL: {{ .Values.config.ollamaBaseUrl | quote }}
  {{- end }}
  RECAC_METRICS_PORT: {{ .Values.config.metricsPort | quote }}
  RECAC_VERBOSE: {{ .Values.config.verbose | default false | quote }}
  RECAC_MAX_ITERATIONS: {{ .Values.config.maxIterations | quote }}
  RECAC_MANAGER_FREQUENCY: {{ .Values.config.managerFrequency | quote }}
  RECAC_MAX_TOKENS: {{ .Values.config.maxTokens | quote }}
  JIRA_URL: {{ .Values.config.jiraUrl | quote }}
  JIRA_USERNAME: {{ .Values.config.jiraUsername | quote }}
  RECAC_ORCHESTRATOR_MODE: "k8s"
  RECAC_ORCHESTRATOR_IMAGE: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
  RECAC_ORCHESTRATOR_NAMESPACE: {{ .Release.Namespace | quote }}
  RECAC_AGENT_PROVIDER: {{ .Values.config.provider | quote }}
  RECAC_AGENT_MODEL: {{ include "recac.defaultModel" . | quote }}
  RECAC_IMAGE_PULL_POLICY: {{ .Values.config.imagePullPolicy | quote }}
  RECAC_AGENT_SECRET_NAME: {{ include "recac.fullname" . | quote }}
  RECAC_POLLER: {{ .Values.config.poller | quote }}
  RECAC_WORK_FILE: {{ .Values.config.work_file | quote }}
  RECAC_ORCHESTRATOR_INTERVAL: {{ .Values.config.interval | quote }}
  RECAC_ORCHESTRATOR_JIRA_LABEL: {{ .Values.config.jira_label | quote }}
  RECAC_ORCHESTRATOR_JIRA_QUERY: {{ .Values.config.jira_query | quote }}
  RECAC_DB_TYPE: {{ .Values.config.dbType | quote }}
